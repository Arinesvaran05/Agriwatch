import{a as T,b as d,c as A,d as N,f as L,g as V,h as q,m as z,o as G}from"./chunk-OX5MQXUP.js";import{$ as a,B as b,Ba as O,Ca as I,D as M,Ea as k,Fa as D,H as p,N as y,O as s,P as i,Q as t,R as g,T as P,U as x,Z as f,ba as S,ra as F,ta as E,y as o}from"./chunk-WZYVPUJW.js";function R(n,r){n&1&&(i(0,"div",24),a(1," Full name is required "),t())}function j(n,r){n&1&&(i(0,"div",24),a(1," Please enter a valid email address "),t())}function H(n,r){n&1&&(i(0,"span",25),a(1,"\u{1F441}"),t())}function W(n,r){n&1&&(i(0,"span",26),a(1,"\u{1F6AB}"),t())}function Y(n,r){n&1&&(i(0,"div",24),a(1," Password must be at least 6 characters long "),t())}function J(n,r){n&1&&(i(0,"span",25),a(1,"\u{1F441}"),t())}function K(n,r){n&1&&(i(0,"span",26),a(1,"\u{1F6AB}"),t())}function Q(n,r){n&1&&(i(0,"span"),a(1,"Please confirm your password"),t())}function U(n,r){n&1&&(i(0,"span"),a(1,"Passwords do not match"),t())}function X(n,r){if(n&1&&(i(0,"div",24),p(1,Q,2,0,"span",19)(2,U,2,0,"span",19),t()),n&2){let l,e=x();o(),s("ngIf",(l=e.signupForm.get("confirmPassword"))==null?null:l.hasError("required")),o(),s("ngIf",e.signupForm.hasError("passwordMismatch"))}}function Z(n,r){n&1&&(i(0,"span"),a(1,"Create Account"),t())}function $(n,r){n&1&&(i(0,"span"),a(1,"Creating Account..."),t())}function ee(n,r){if(n&1&&(i(0,"div",27),a(1),t()),n&2){let l=x();o(),S(" ",l.errorMessage," ")}}function ne(n,r){if(n&1&&(i(0,"div",28),a(1),t()),n&2){let l=x();o(),S(" ",l.successMessage," ")}}var B=class n{constructor(r,l,e){this.fb=r;this.authService=l;this.router=e;this.signupForm=this.fb.group({name:["",[d.required,d.minLength(2)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",[d.required]]},{validators:this.passwordMatchValidator})}signupForm;isLoading=!1;errorMessage="";successMessage="";showPassword=!1;showConfirmPassword=!1;passwordMatchValidator(r){let l=r.get("password"),e=r.get("confirmPassword");return l&&e&&l.value!==e.value?{passwordMismatch:!0}:null}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}onSubmit(){this.signupForm.valid&&(this.isLoading=!0,this.errorMessage="",this.successMessage="",this.authService.signup(this.signupForm.value).subscribe({next:r=>{this.isLoading=!1,this.successMessage="Account created successfully! Please check your email for the 4-digit verification code.",setTimeout(()=>{this.router.navigate(["/verify-email"],{queryParams:{email:this.signupForm.value.email}})},2e3)},error:r=>{this.isLoading=!1,this.errorMessage=r.error?.message||"Registration failed. Please try again."}}))}static \u0275fac=function(l){return new(l||n)(b(z),b(D),b(O))};static \u0275cmp=M({type:n,selectors:[["app-signup"]],decls:46,vars:26,consts:[[1,"signup-container"],[1,"signup-card"],[1,"signup-header"],[1,"signup-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Enter your full name"],["class","error-message",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email"],["for","password"],[1,"password-input-container"],["id","password","formControlName","password","placeholder","Enter your password",3,"type"],["type","button",1,"password-toggle",3,"click"],["class","eye-icon",4,"ngIf"],["class","eye-slash-icon",4,"ngIf"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",3,"type"],["type","submit",1,"signup-btn",3,"disabled"],[4,"ngIf"],[1,"signup-footer"],["routerLink","/login",1,"login-link"],["class","error-alert",4,"ngIf"],["class","success-alert",4,"ngIf"],[1,"error-message"],[1,"eye-icon"],[1,"eye-slash-icon"],[1,"error-alert"],[1,"success-alert"]],template:function(l,e){if(l&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"\u{1F331} AgriWatch"),t(),i(5,"p"),a(6,"Create your account to start monitoring your farm"),t()(),i(7,"form",3),P("ngSubmit",function(){return e.onSubmit()}),i(8,"div",4)(9,"label",5),a(10,"Full Name"),t(),g(11,"input",6),p(12,R,2,0,"div",7),t(),i(13,"div",4)(14,"label",8),a(15,"Email"),t(),g(16,"input",9),p(17,j,2,0,"div",7),t(),i(18,"div",4)(19,"label",10),a(20,"Password"),t(),i(21,"div",11),g(22,"input",12),i(23,"button",13),P("click",function(){return e.togglePasswordVisibility()}),p(24,H,2,0,"span",14)(25,W,2,0,"span",15),t()(),p(26,Y,2,0,"div",7),t(),i(27,"div",4)(28,"label",16),a(29,"Confirm Password"),t(),i(30,"div",11),g(31,"input",17),i(32,"button",13),P("click",function(){return e.toggleConfirmPasswordVisibility()}),p(33,J,2,0,"span",14)(34,K,2,0,"span",15),t()(),p(35,X,3,2,"div",7),t(),i(36,"button",18),p(37,Z,2,0,"span",19)(38,$,2,0,"span",19),t()(),i(39,"div",20)(40,"p"),a(41,"Already have an account? "),i(42,"a",21),a(43,"Sign In"),t()()(),p(44,ee,2,1,"div",22)(45,ne,2,1,"div",23),t()()),l&2){let m,_,h,w,v,C,u,c;o(7),s("formGroup",e.signupForm),o(4),f("error",((m=e.signupForm.get("name"))==null?null:m.invalid)&&((m=e.signupForm.get("name"))==null?null:m.touched)),o(),s("ngIf",((_=e.signupForm.get("name"))==null?null:_.invalid)&&((_=e.signupForm.get("name"))==null?null:_.touched)),o(4),f("error",((h=e.signupForm.get("email"))==null?null:h.invalid)&&((h=e.signupForm.get("email"))==null?null:h.touched)),o(),s("ngIf",((w=e.signupForm.get("email"))==null?null:w.invalid)&&((w=e.signupForm.get("email"))==null?null:w.touched)),o(5),f("error",((v=e.signupForm.get("password"))==null?null:v.invalid)&&((v=e.signupForm.get("password"))==null?null:v.touched)),s("type",e.showPassword?"text":"password"),o(),y("aria-label",e.showPassword?"Hide password":"Show password"),o(),s("ngIf",!e.showPassword),o(),s("ngIf",e.showPassword),o(),s("ngIf",((C=e.signupForm.get("password"))==null?null:C.invalid)&&((C=e.signupForm.get("password"))==null?null:C.touched)),o(5),f("error",((u=e.signupForm.get("confirmPassword"))==null?null:u.invalid)&&((u=e.signupForm.get("confirmPassword"))==null?null:u.touched)||e.signupForm.hasError("passwordMismatch")&&((u=e.signupForm.get("confirmPassword"))==null?null:u.touched)),s("type",e.showConfirmPassword?"text":"password"),o(),y("aria-label",e.showConfirmPassword?"Hide confirm password":"Show confirm password"),o(),s("ngIf",!e.showConfirmPassword),o(),s("ngIf",e.showConfirmPassword),o(),s("ngIf",((c=e.signupForm.get("confirmPassword"))==null?null:c.invalid)&&((c=e.signupForm.get("confirmPassword"))==null?null:c.touched)||e.signupForm.hasError("passwordMismatch")&&((c=e.signupForm.get("confirmPassword"))==null?null:c.touched)),o(),s("disabled",e.signupForm.invalid||e.isLoading),o(),s("ngIf",!e.isLoading),o(),s("ngIf",e.isLoading),o(6),s("ngIf",e.errorMessage),o(),s("ngIf",e.successMessage)}},dependencies:[E,F,G,L,T,A,N,V,q,k,I],styles:[".signup-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:url(https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80);background-size:cover;background-position:center;background-attachment:fixed;padding:20px}.signup-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 20px 40px #0000001a;padding:40px;width:100%;max-width:450px}.signup-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.signup-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:10px;font-size:2.5rem}.signup-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin:0}.signup-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#2c3e50;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e8ed;border-radius:10px;font-size:16px;transition:border-color .3s ease;box-sizing:border-box}.password-input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:50px}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:8px;background:#f5f5f5;border:1px solid #ccc;cursor:pointer;font-size:14px;padding:4px 6px;border-radius:3px;transition:none;display:flex;align-items:center;justify-content:center;width:28px;height:28px;color:#333;font-family:monospace}.password-toggle[_ngcontent-%COMP%]:hover{background-color:#e9e9e9;border-color:#999}.password-toggle[_ngcontent-%COMP%]:focus{outline:1px solid #666;outline-offset:1px}.password-toggle[_ngcontent-%COMP%]:active{background-color:#ddd}.eye-icon[_ngcontent-%COMP%], .eye-slash-icon[_ngcontent-%COMP%]{font-size:12px;line-height:1}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#e74c3c}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:14px;margin-top:5px}.signup-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:transform .2s ease}.signup-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.signup-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.signup-footer[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.login-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600}.login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-alert[_ngcontent-%COMP%]{background:#fee;color:#e74c3c;padding:12px;border-radius:8px;margin-top:20px;text-align:center;border:1px solid #fcc}.success-alert[_ngcontent-%COMP%]{background:#efe;color:#27ae60;padding:12px;border-radius:8px;margin-top:20px;text-align:center;border:1px solid #cfc}"]})};export{B as SignupComponent};
