import{a as V}from"./chunk-MJYXO2CU.js";import{$ as n,B as h,Ba as E,Ca as L,D as v,Ea as y,Fa as I,H as f,O as g,P as t,Q as e,S as M,T as m,U as _,Y as T,Z as C,aa as O,ba as p,ha as x,ia as b,ja as P,p as c,q as d,qa as w,ra as S,sa as k,ta as D,y as s}from"./chunk-WZYVPUJW.js";function z(l,a){if(l&1&&(t(0,"div",43),n(1),e()),l&2){let i=_();s(),p(" ",i.currentTemperature.value,"\xB0C ")}}function F(l,a){l&1&&(t(0,"div",44),n(1,"Loading..."),e())}function B(l,a){if(l&1&&(t(0,"p",45),n(1),x(2,"date"),e()),l&2){let i=_();s(),p(" Last updated: ",b(2,1,i.currentTemperature.timestamp,"medium")," ")}}function j(l,a){l&1&&(t(0,"span"),n(1,"\u{1F504} Refresh"),e())}function A(l,a){l&1&&(t(0,"span"),n(1,"\u23F3 Refreshing..."),e())}function U(l,a){if(l&1&&(t(0,"div",46),n(1),x(2,"date"),e()),l&2){let i=_();s(),p(" Last updated: ",b(2,1,i.lastRefreshTime,"short")," ")}}function H(l,a){if(l&1&&(t(0,"tr")(1,"td",34),n(2),x(3,"date"),e(),t(4,"td",34),n(5),e(),t(6,"td",34)(7,"span",47),n(8),e()()()),l&2){let i=a.$implicit,r=_();C("high",i.value>30)("low",i.value<15),s(2),O(b(3,11,i.timestamp,"medium")),s(3),p("",i.value,"\xB0C"),s(2),C("normal",i.value>=15&&i.value<=30)("warning",i.value>30||i.value<15),s(),p(" ",r.getStatus(i.value)," ")}}var R=class l{constructor(a,i,r){this.authService=a;this.dataService=i;this.router=r;this.currentUser=this.authService.currentUserValue}currentUser;currentTemperature=null;temperatureLog=[];selectedLimit=50;isRefreshing=!1;lastRefreshTime=null;refreshInterval;ngOnInit(){this.loadCurrentTemperature(),this.loadTemperatureLog(this.selectedLimit),this.refreshInterval=setInterval(()=>{this.refreshData()},1e4)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadCurrentTemperature(){this.dataService.getCurrentTemperature().subscribe({next:a=>this.currentTemperature=a,error:a=>console.error("Error loading temperature data:",a)})}loadTemperatureLog(a){this.selectedLimit=Math.min(Math.max(a,50),200),this.dataService.getTemperatureLog(this.selectedLimit).subscribe({next:i=>this.temperatureLog=i,error:i=>console.error("Error loading temperature log:",i)})}refreshData(){this.isRefreshing=!0,this.loadCurrentTemperature(),this.loadTemperatureLog(this.selectedLimit),this.lastRefreshTime=new Date,setTimeout(()=>{this.isRefreshing=!1},1e3)}manualRefresh(){this.refreshData()}downloadData(a=100){this.dataService.downloadTemperatureLog(a).subscribe({next:i=>{let r=window.URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`temperature_log_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(r),document.body.removeChild(o)},error:i=>console.error("Error downloading data:",i)})}getStatus(a){return a>=15&&a<=30?"Normal":a>30?"High":"Low"}getAverageTemperature(){if(this.temperatureLog.length===0)return 0;let a=this.temperatureLog.reduce((i,r)=>i+r.value,0);return Math.round(a/this.temperatureLog.length*100)/100}getMaxTemperature(){return this.temperatureLog.length===0?0:Math.max(...this.temperatureLog.map(a=>a.value))}getMinTemperature(){return this.temperatureLog.length===0?0:Math.min(...this.temperatureLog.map(a=>a.value))}getTemperatureRange(){return Math.round((this.getMaxTemperature()-this.getMinTemperature())*100)/100}goBack(){this.router.navigate(["/user/dashboard"])}goToDashboard(){this.router.navigate(["/user/dashboard"])}goToHumidity(){this.router.navigate(["/user/humidity"])}goToSoilMoisture(){this.router.navigate(["/user/soil-moisture"])}goToDataVisualization(){this.router.navigate(["/user/data-visualization"])}goToProfile(){this.router.navigate(["/user/profile"])}logout(){this.authService.logout(),this.router.navigate(["/login"])}static \u0275fac=function(i){return new(i||l)(h(I),h(V),h(E))};static \u0275cmp=v({type:l,selectors:[["app-temperature"]],decls:111,vars:13,consts:[["tempLoading",""],[1,"temperature-container"],[1,"temperature-header"],[1,"header-content"],[1,"header-left"],[1,"back-btn",3,"click"],[1,"user-info"],[1,"logout-btn",3,"click"],[1,"temperature-nav"],["routerLink","/user/dashboard",1,"nav-item"],["routerLink","/user/temperature",1,"nav-item","active"],["routerLink","/user/humidity",1,"nav-item"],["routerLink","/user/soil-moisture",1,"nav-item"],["routerLink","/user/data-visualization",1,"nav-item"],["routerLink","/user/profile",1,"nav-item"],[1,"temperature-main"],[1,"current-reading"],[1,"reading-card"],[1,"reading-icon"],[1,"reading-content"],["class","reading-value",4,"ngIf","ngIfElse"],["class","reading-time",4,"ngIf"],[1,"historical-data"],[1,"section-header"],[1,"refresh-controls"],[1,"refresh-btn",3,"click","disabled"],[4,"ngIf"],["class","last-refresh",4,"ngIf"],[1,"data-controls"],[1,"control-btn",3,"click"],[1,"download-group"],[1,"download-btn",3,"click"],[1,"data-table"],[2,"text-align","center"],[2,"text-align","center !important"],[3,"high","low",4,"ngFor","ngForOf"],[1,"statistics"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-value"],[1,"quick-actions"],[1,"action-buttons"],[1,"action-btn",3,"click"],[1,"reading-value"],[1,"loading"],[1,"reading-time"],[1,"last-refresh"],[1,"status"]],template:function(i,r){if(i&1){let o=M();t(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"button",5),m("click",function(){return c(o),d(r.goBack())}),n(5,"\u2190 Back"),e(),t(6,"h1"),n(7,"\u{1F321}\uFE0F Temperature Monitoring"),e()(),t(8,"div",6)(9,"span"),n(10),e(),t(11,"button",7),m("click",function(){return c(o),d(r.logout())}),n(12,"Sign Out"),e()()()(),t(13,"nav",8)(14,"a",9),n(15,"Dashboard"),e(),t(16,"a",10),n(17,"Temperature"),e(),t(18,"a",11),n(19,"Humidity"),e(),t(20,"a",12),n(21,"Soil Moisture"),e(),t(22,"a",13),n(23,"Data Visualization"),e(),t(24,"a",14),n(25,"Profile"),e()(),t(26,"main",15)(27,"section",16)(28,"h2"),n(29,"Current Temperature"),e(),t(30,"div",17)(31,"div",18),n(32,"\u{1F321}\uFE0F"),e(),t(33,"div",19),f(34,z,2,1,"div",20)(35,F,2,0,"ng-template",null,0,P)(37,B,3,4,"p",21),e()()(),t(38,"section",22)(39,"div",23)(40,"h2"),n(41,"Temperature History"),e(),t(42,"div",24)(43,"button",25),m("click",function(){return c(o),d(r.manualRefresh())}),f(44,j,2,0,"span",26)(45,A,2,0,"span",26),e(),f(46,U,3,4,"div",27),e()(),t(47,"div",28)(48,"button",29),m("click",function(){return c(o),d(r.loadTemperatureLog(50))}),n(49,"Last 50"),e(),t(50,"button",29),m("click",function(){return c(o),d(r.loadTemperatureLog(100))}),n(51,"Last 100"),e(),t(52,"button",29),m("click",function(){return c(o),d(r.loadTemperatureLog(200))}),n(53,"Last 200"),e(),t(54,"div",30)(55,"button",31),m("click",function(){return c(o),d(r.downloadData(50))}),n(56,"\u{1F4E5} Download 50"),e(),t(57,"button",31),m("click",function(){return c(o),d(r.downloadData(100))}),n(58,"\u{1F4E5} Download 100"),e(),t(59,"button",31),m("click",function(){return c(o),d(r.downloadData(200))}),n(60,"\u{1F4E5} Download 200"),e()()(),t(61,"div",32)(62,"table",33)(63,"thead")(64,"tr")(65,"th",34),n(66,"Timestamp"),e(),t(67,"th",34),n(68,"Temperature (\xB0C)"),e(),t(69,"th",34),n(70,"Status"),e()()(),t(71,"tbody"),f(72,H,9,14,"tr",35),e()()()(),t(73,"section",36)(74,"h2"),n(75,"Temperature Statistics"),e(),t(76,"div",37)(77,"div",38)(78,"h3"),n(79,"Average"),e(),t(80,"div",39),n(81),e()(),t(82,"div",38)(83,"h3"),n(84,"Maximum"),e(),t(85,"div",39),n(86),e()(),t(87,"div",38)(88,"h3"),n(89,"Minimum"),e(),t(90,"div",39),n(91),e()(),t(92,"div",38)(93,"h3"),n(94,"Range"),e(),t(95,"div",39),n(96),e()()()(),t(97,"section",40)(98,"h2"),n(99,"Quick Actions"),e(),t(100,"div",41)(101,"button",42),m("click",function(){return c(o),d(r.goToDashboard())}),n(102,"\u{1F3E0} Dashboard"),e(),t(103,"button",42),m("click",function(){return c(o),d(r.goToHumidity())}),n(104,"\u{1F4A7} Humidity"),e(),t(105,"button",42),m("click",function(){return c(o),d(r.goToSoilMoisture())}),n(106,"\u{1F331} Soil Moisture"),e(),t(107,"button",42),m("click",function(){return c(o),d(r.goToDataVisualization())}),n(108,"\u{1F4CA} Data Visualization"),e(),t(109,"button",42),m("click",function(){return c(o),d(r.goToProfile())}),n(110,"\u{1F464} Profile"),e()()()()()}if(i&2){let o=T(36);s(10),p("Welcome, ",r.currentUser==null?null:r.currentUser.name),s(24),g("ngIf",r.currentTemperature)("ngIfElse",o),s(3),g("ngIf",r.currentTemperature),s(6),g("disabled",r.isRefreshing),s(),g("ngIf",!r.isRefreshing),s(),g("ngIf",r.isRefreshing),s(),g("ngIf",r.lastRefreshTime),s(26),g("ngForOf",r.temperatureLog),s(9),p("",r.getAverageTemperature(),"\xB0C"),s(5),p("",r.getMaxTemperature(),"\xB0C"),s(5),p("",r.getMinTemperature(),"\xB0C"),s(5),p("",r.getTemperatureRange(),"\xB0C")}},dependencies:[D,w,S,y,L,k],styles:[".temperature-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);background:#f8f9fa;padding-bottom:20px}.temperature-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8e44ad,#9b59b6);color:#fff;padding:20px 0;box-shadow:0 2px 10px #0000001a}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.back-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px 16px;border-radius:8px;cursor:pointer;transition:background .3s ease;font-size:1rem}.back-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px 16px;border-radius:8px;cursor:pointer;transition:background .3s ease}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.temperature-nav[_ngcontent-%COMP%]{background:#fff;padding:0 40px;border-bottom:1px solid #e1e8ed}.nav-item[_ngcontent-%COMP%]{display:inline-block;padding:15px 20px;color:#7f8c8d;text-decoration:none;border-bottom:3px solid transparent;transition:all .3s ease}.nav-item[_ngcontent-%COMP%]:hover, .nav-item.active[_ngcontent-%COMP%]{color:#8e44ad;border-bottom-color:#8e44ad}.temperature-main[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.current-reading[_ngcontent-%COMP%], .historical-data[_ngcontent-%COMP%], .statistics[_ngcontent-%COMP%]{margin-bottom:40px}.current-reading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .historical-data[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .statistics[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px;font-size:1.5rem}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:15px}.refresh-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.refresh-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;transition:all .3s ease;font-weight:500;font-size:.9rem}.refresh-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 8px #28a7454d}.refresh-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none}.last-refresh[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem;font-style:italic}.reading-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:30px;box-shadow:0 5px 15px #00000014;display:flex;align-items:center;gap:30px}.reading-icon[_ngcontent-%COMP%]{font-size:3rem}.reading-value[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#8e44ad;margin-bottom:10px;text-align:center}.reading-time[_ngcontent-%COMP%]{color:#7f8c8d;margin:0}.loading[_ngcontent-%COMP%]{color:#7f8c8d;font-style:italic}.data-controls[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;gap:10px;flex-wrap:wrap}.control-btn[_ngcontent-%COMP%], .download-btn[_ngcontent-%COMP%]{padding:10px 20px;border:2px solid #667eea;background:#fff;color:#667eea;border-radius:8px;cursor:pointer;transition:all .3s ease;font-weight:500}.control-btn[_ngcontent-%COMP%]:hover, .download-btn[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.data-table[_ngcontent-%COMP%]{background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 5px 15px #00000014;display:flex;justify-content:center;align-items:center}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:center}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px;text-align:center!important;border-bottom:1px solid #e1e8ed}th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#2c3e50}tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{text-align:center!important}.status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.9rem;font-weight:500}.status.normal[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status.warning[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 5px 15px #00000014;text-align:center}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#7f8c8d;margin:0 0 15px;font-size:1rem}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#667eea}.quick-actions[_ngcontent-%COMP%]{margin-bottom:40px}.quick-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px;font-size:1.5rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:15px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;transition:transform .3s ease;font-weight:500;font-size:1rem}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.reading-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.data-controls[_ngcontent-%COMP%]{justify-content:center}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.action-buttons[_ngcontent-%COMP%]{justify-content:center}}"]})};export{R as TemperatureComponent};
