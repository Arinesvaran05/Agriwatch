import{a as L}from"./chunk-MJYXO2CU.js";import{$ as n,B as D,Ba as w,Ca as I,D as E,Ea as k,Fa as A,H as f,O as m,P as e,Q as t,R as v,S as O,T as h,U as c,Y as S,_,aa as u,ba as p,ha as C,ia as b,ja as M,p as g,q as x,ra as P,sa as y,ta as T,y as s}from"./chunk-WZYVPUJW.js";function R(a,i){if(a&1&&(e(0,"div",35),n(1),t()),a&2){let r=c();s(),p(" ",r.temperatureData.value,"\xB0C ")}}function H(a,i){a&1&&(e(0,"div",36),n(1,"Loading..."),t())}function F(a,i){if(a&1&&(e(0,"p",37),n(1),C(2,"date"),t()),a&2){let r=c();s(),p(" ",b(2,1,r.temperatureData.timestamp,"short")," ")}}function U(a,i){if(a&1&&(e(0,"div",35),n(1),t()),a&2){let r=c();s(),p(" ",r.humidityData.value,"% ")}}function B(a,i){a&1&&(e(0,"div",36),n(1,"Loading..."),t())}function j(a,i){if(a&1&&(e(0,"p",37),n(1),C(2,"date"),t()),a&2){let r=c();s(),p(" ",b(2,1,r.humidityData.timestamp,"short")," ")}}function $(a,i){if(a&1&&(e(0,"div",35),n(1),t()),a&2){let r=c();s(),p(" ",r.soilMoistureData.value,"% ")}}function N(a,i){a&1&&(e(0,"div",36),n(1,"Loading..."),t())}function W(a,i){if(a&1&&(e(0,"p",37),n(1),C(2,"date"),t()),a&2){let r=c();s(),p(" ",b(2,1,r.soilMoistureData.timestamp,"short")," ")}}function Y(a,i){if(a&1&&(e(0,"small"),n(1),t()),a&2){let r=c();s(),u(r.getTimeAgo(r.temperatureData.timestamp))}}function J(a,i){if(a&1&&(e(0,"small"),n(1),t()),a&2){let r=c();s(),u(r.getTimeAgo(r.humidityData.timestamp))}}function Q(a,i){if(a&1&&(e(0,"small"),n(1),t()),a&2){let r=c();s(),u(r.getTimeAgo(r.soilMoistureData.timestamp))}}var V=class a{constructor(i,r,o){this.authService=i;this.dataService=r;this.router=o;this.currentUser=this.authService.currentUserValue}currentUser;temperatureData=null;humidityData=null;soilMoistureData=null;ngOnInit(){this.loadSensorData(),setInterval(()=>{this.loadSensorData()},3e4)}loadSensorData(){this.dataService.getCurrentTemperature().subscribe({next:i=>this.temperatureData=i,error:i=>console.error("Error loading temperature data:",i)}),this.dataService.getCurrentHumidity().subscribe({next:i=>this.humidityData=i,error:i=>console.error("Error loading humidity data:",i)}),this.dataService.getCurrentSoilMoisture().subscribe({next:i=>this.soilMoistureData=i,error:i=>console.error("Error loading soil moisture data:",i)})}logout(){this.authService.logout(),this.router.navigate(["/login"])}navigateTo(i){this.router.navigate([i])}getTemperatureStatus(){if(!this.temperatureData)return{class:"offline",text:"Offline"};let i=new Date,r=new Date(this.temperatureData.timestamp);return(i.getTime()-r.getTime())/(1e3*60)<=2?{class:"online",text:"Online"}:{class:"offline",text:"Offline"}}getHumidityStatus(){if(!this.humidityData)return{class:"offline",text:"Offline"};let i=new Date,r=new Date(this.humidityData.timestamp);return(i.getTime()-r.getTime())/(1e3*60)<=2?{class:"online",text:"Online"}:{class:"offline",text:"Offline"}}getSoilMoistureStatus(){if(!this.soilMoistureData)return{class:"offline",text:"Offline"};let i=new Date,r=new Date(this.soilMoistureData.timestamp);return(i.getTime()-r.getTime())/(1e3*60)<=2?{class:"online",text:"Online"}:{class:"offline",text:"Offline"}}getTimeAgo(i){let r=new Date,o=new Date(i),l=Math.floor((r.getTime()-o.getTime())/(1e3*60));if(l<1)return"Just now";if(l<60)return`${l} minute${l>1?"s":""} ago`;{let d=Math.floor(l/60);return`${d} hour${d>1?"s":""} ago`}}getDatabaseStatus(){return this.temperatureData||this.humidityData||this.soilMoistureData?{class:"online",text:"Connected",details:"Database is accessible"}:{class:"offline",text:"Disconnected",details:"Cannot connect to database"}}static \u0275fac=function(r){return new(r||a)(D(A),D(L),D(w))};static \u0275cmp=E({type:a,selectors:[["app-dashboard"]],decls:134,vars:26,consts:[["tempLoading",""],["humLoading",""],["soilLoading",""],[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-content"],[1,"user-info"],[1,"logout-btn",3,"click"],[1,"dashboard-nav"],["routerLink","/user/dashboard",1,"nav-item","active"],["routerLink","/user/temperature",1,"nav-item"],["routerLink","/user/humidity",1,"nav-item"],["routerLink","/user/soil-moisture",1,"nav-item"],["routerLink","/user/data-visualization",1,"nav-item"],["routerLink","/user/profile",1,"nav-item"],[1,"dashboard-main"],[1,"readings-section"],[1,"readings-grid"],[1,"reading-card","temperature"],[1,"reading-icon"],[1,"reading-content"],["class","reading-value",4,"ngIf","ngIfElse"],["class","reading-time",4,"ngIf"],[1,"reading-card","humidity"],[1,"reading-card","soil-moisture"],[1,"actions-section"],[1,"actions-grid"],[1,"action-card",3,"click"],[1,"action-icon"],[1,"status-section"],[1,"status-grid"],[1,"status-card"],[1,"status-indicator"],[1,"status-content"],[4,"ngIf"],[1,"reading-value"],[1,"loading"],[1,"reading-time"]],template:function(r,o){if(r&1){let l=O();e(0,"div",3)(1,"header",4)(2,"div",5)(3,"h1"),n(4,"\u{1F331} AgriWatch Dashboard"),t(),e(5,"div",6)(6,"span"),n(7),t(),e(8,"button",7),h("click",function(){return g(l),x(o.logout())}),n(9,"Sign Out"),t()()()(),e(10,"nav",8)(11,"a",9),n(12,"Dashboard"),t(),e(13,"a",10),n(14,"Temperature"),t(),e(15,"a",11),n(16,"Humidity"),t(),e(17,"a",12),n(18,"Soil Moisture"),t(),e(19,"a",13),n(20,"Data Visualization"),t(),e(21,"a",14),n(22,"Profile"),t()(),e(23,"main",15)(24,"section",16)(25,"h2"),n(26,"Current Sensor Readings"),t(),e(27,"div",17)(28,"div",18)(29,"div",19),n(30,"\u{1F321}\uFE0F"),t(),e(31,"div",20)(32,"h3"),n(33,"Temperature"),t(),f(34,R,2,1,"div",21)(35,H,2,0,"ng-template",null,0,M)(37,F,3,4,"p",22),t()(),e(38,"div",23)(39,"div",19),n(40,"\u{1F4A7}"),t(),e(41,"div",20)(42,"h3"),n(43,"Humidity"),t(),f(44,U,2,1,"div",21)(45,B,2,0,"ng-template",null,1,M)(47,j,3,4,"p",22),t()(),e(48,"div",24)(49,"div",19),n(50,"\u{1F331}"),t(),e(51,"div",20)(52,"h3"),n(53,"Soil Moisture"),t(),f(54,$,2,1,"div",21)(55,N,2,0,"ng-template",null,2,M)(57,W,3,4,"p",22),t()()()(),e(58,"section",25)(59,"h2"),n(60,"Quick Actions"),t(),e(61,"div",26)(62,"div",27),h("click",function(){return g(l),x(o.navigateTo("/user/temperature"))}),e(63,"div",28),n(64,"\u{1F4CA}"),t(),e(65,"h3"),n(66,"View Temperature Log"),t(),e(67,"p"),n(68,"Check temperature history and trends"),t()(),e(69,"div",27),h("click",function(){return g(l),x(o.navigateTo("/user/humidity"))}),e(70,"div",28),n(71,"\u{1F4C8}"),t(),e(72,"h3"),n(73,"View Humidity Log"),t(),e(74,"p"),n(75,"Monitor humidity patterns over time"),t()(),e(76,"div",27),h("click",function(){return g(l),x(o.navigateTo("/user/soil-moisture"))}),e(77,"div",28),n(78,"\u{1F4CB}"),t(),e(79,"h3"),n(80,"View Soil Moisture Log"),t(),e(81,"p"),n(82,"Track soil moisture levels"),t()(),e(83,"div",27),h("click",function(){return g(l),x(o.navigateTo("/user/data-visualization"))}),e(84,"div",28),n(85,"\u{1F4CA}"),t(),e(86,"h3"),n(87,"Data Visualization"),t(),e(88,"p"),n(89,"Live charts and analytics"),t()(),e(90,"div",27),h("click",function(){return g(l),x(o.navigateTo("/user/profile"))}),e(91,"div",28),n(92,"\u{1F464}"),t(),e(93,"h3"),n(94,"Manage Profile"),t(),e(95,"p"),n(96,"Update your account information"),t()()()(),e(97,"section",29)(98,"h2"),n(99,"System Status"),t(),e(100,"div",30)(101,"div",31),v(102,"div",32),e(103,"div",33)(104,"h3"),n(105,"Temperature Sensor"),t(),e(106,"p"),n(107),t(),f(108,Y,2,1,"small",34),t()(),e(109,"div",31),v(110,"div",32),e(111,"div",33)(112,"h3"),n(113,"Humidity Sensor"),t(),e(114,"p"),n(115),t(),f(116,J,2,1,"small",34),t()(),e(117,"div",31),v(118,"div",32),e(119,"div",33)(120,"h3"),n(121,"Soil Moisture Sensor"),t(),e(122,"p"),n(123),t(),f(124,Q,2,1,"small",34),t()(),e(125,"div",31),v(126,"div",32),e(127,"div",33)(128,"h3"),n(129,"Database"),t(),e(130,"p"),n(131),t(),e(132,"small"),n(133),t()()()()()()()}if(r&2){let l=S(36),d=S(46),z=S(56);s(7),p("Welcome, ",o.currentUser==null?null:o.currentUser.name),s(27),m("ngIf",o.temperatureData)("ngIfElse",l),s(3),m("ngIf",o.temperatureData),s(7),m("ngIf",o.humidityData)("ngIfElse",d),s(3),m("ngIf",o.humidityData),s(7),m("ngIf",o.soilMoistureData)("ngIfElse",z),s(3),m("ngIf",o.soilMoistureData),s(45),_(o.getTemperatureStatus().class),s(5),u(o.getTemperatureStatus().text),s(),m("ngIf",o.temperatureData),s(2),_(o.getHumidityStatus().class),s(5),u(o.getHumidityStatus().text),s(),m("ngIf",o.humidityData),s(2),_(o.getSoilMoistureStatus().class),s(5),u(o.getSoilMoistureStatus().text),s(),m("ngIf",o.soilMoistureData),s(2),_(o.getDatabaseStatus().class),s(5),u(o.getDatabaseStatus().text),s(2),u(o.getDatabaseStatus().details)}},dependencies:[T,P,k,I,y],styles:[".dashboard-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);background:#f8f9fa;padding-bottom:20px}.dashboard-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8e44ad,#9b59b6);color:#fff;padding:20px 0;box-shadow:0 2px 10px #0000001a}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px 16px;border-radius:8px;cursor:pointer;transition:background .3s ease}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.dashboard-nav[_ngcontent-%COMP%]{background:#fff;padding:0 40px;border-bottom:1px solid #e1e8ed}.nav-item[_ngcontent-%COMP%]{display:inline-block;padding:15px 20px;color:#7f8c8d;text-decoration:none;border-bottom:3px solid transparent;transition:all .3s ease}.nav-item[_ngcontent-%COMP%]:hover, .nav-item.active[_ngcontent-%COMP%]{color:#8e44ad;border-bottom-color:#8e44ad}.dashboard-main[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.readings-section[_ngcontent-%COMP%], .actions-section[_ngcontent-%COMP%], .status-section[_ngcontent-%COMP%]{margin-bottom:40px}.readings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .actions-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .status-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px;font-size:1.5rem}.readings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:30px}.reading-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 5px 15px #00000014;display:flex;align-items:center;gap:20px;transition:transform .3s ease}.reading-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.reading-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:60px;text-align:center}.reading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2c3e50;font-size:1.1rem}.reading-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#8e44ad;margin-bottom:5px}.reading-time[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem;margin:0}.loading[_ngcontent-%COMP%]{color:#7f8c8d;font-style:italic}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.action-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 5px 15px #00000014;text-align:center;cursor:pointer;transition:all .3s ease}.action-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.action-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:15px}.action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;margin:0 0 10px}.action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin:0;font-size:.9rem}.status-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.status-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:20px;box-shadow:0 5px 15px #00000014;display:flex;align-items:center;gap:15px}.status-indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.status-indicator.online[_ngcontent-%COMP%]{background:#27ae60}.status-indicator.offline[_ngcontent-%COMP%]{background:#e74c3c}.status-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;color:#2c3e50;font-size:1rem}.status-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#7f8c8d;font-size:.9rem}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.readings-grid[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%], .status-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.nav-item[_ngcontent-%COMP%]{padding:10px 15px;font-size:.9rem}}"]})};export{V as DashboardComponent};
