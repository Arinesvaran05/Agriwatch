import{a as V}from"./chunk-MJYXO2CU.js";import{$ as n,B as D,Ba as w,Ca as A,D as E,Ea as I,Fa as k,H as v,O as l,P as e,Q as t,R as h,S as O,T as x,U as c,Y as S,_,aa as p,ba as f,ha as C,ia as b,ja as M,p as u,q as g,ra as P,sa as y,ta as T,y as d}from"./chunk-WZYVPUJW.js";function R(a,i){if(a&1&&(e(0,"div",36),n(1),t()),a&2){let r=c();d(),f(" ",r.temperatureData.value,"\xB0C ")}}function H(a,i){a&1&&(e(0,"div",37),n(1,"Loading..."),t())}function U(a,i){if(a&1&&(e(0,"p",38),n(1),C(2,"date"),t()),a&2){let r=c();d(),f(" ",b(2,1,r.temperatureData.timestamp,"short")," ")}}function F(a,i){if(a&1&&(e(0,"div",36),n(1),t()),a&2){let r=c();d(),f(" ",r.humidityData.value,"% ")}}function B(a,i){a&1&&(e(0,"div",37),n(1,"Loading..."),t())}function j(a,i){if(a&1&&(e(0,"p",38),n(1),C(2,"date"),t()),a&2){let r=c();d(),f(" ",b(2,1,r.humidityData.timestamp,"short")," ")}}function $(a,i){if(a&1&&(e(0,"div",36),n(1),t()),a&2){let r=c();d(),f(" ",r.soilMoistureData.value,"% ")}}function N(a,i){a&1&&(e(0,"div",37),n(1,"Loading..."),t())}function W(a,i){if(a&1&&(e(0,"p",38),n(1),C(2,"date"),t()),a&2){let r=c();d(),f(" ",b(2,1,r.soilMoistureData.timestamp,"short")," ")}}function Y(a,i){if(a&1&&(e(0,"small"),n(1),t()),a&2){let r=c();d(),p(r.getTimeAgo(r.temperatureData.timestamp))}}function J(a,i){if(a&1&&(e(0,"small"),n(1),t()),a&2){let r=c();d(),p(r.getTimeAgo(r.humidityData.timestamp))}}function Q(a,i){if(a&1&&(e(0,"small"),n(1),t()),a&2){let r=c();d(),p(r.getTimeAgo(r.soilMoistureData.timestamp))}}var L=class a{constructor(i,r,o){this.authService=i;this.dataService=r;this.router=o;this.currentUser=this.authService.currentUserValue}currentUser;temperatureData=null;humidityData=null;soilMoistureData=null;ngOnInit(){this.loadSensorData(),setInterval(()=>{this.loadSensorData()},3e4)}loadSensorData(){this.dataService.getCurrentTemperature().subscribe({next:i=>this.temperatureData=i,error:i=>console.error("Error loading temperature data:",i)}),this.dataService.getCurrentHumidity().subscribe({next:i=>this.humidityData=i,error:i=>console.error("Error loading humidity data:",i)}),this.dataService.getCurrentSoilMoisture().subscribe({next:i=>this.soilMoistureData=i,error:i=>console.error("Error loading soil moisture data:",i)})}logout(){this.authService.logout(),this.router.navigate(["/login"])}navigateTo(i){this.router.navigate([i])}getTemperatureStatus(){if(!this.temperatureData)return{class:"offline",text:"Offline"};let i=new Date,r=new Date(this.temperatureData.timestamp);return(i.getTime()-r.getTime())/(1e3*60)<=2?{class:"online",text:"Online"}:{class:"offline",text:"Offline"}}getHumidityStatus(){if(!this.humidityData)return{class:"offline",text:"Offline"};let i=new Date,r=new Date(this.humidityData.timestamp);return(i.getTime()-r.getTime())/(1e3*60)<=2?{class:"online",text:"Online"}:{class:"offline",text:"Offline"}}getSoilMoistureStatus(){if(!this.soilMoistureData)return{class:"offline",text:"Offline"};let i=new Date,r=new Date(this.soilMoistureData.timestamp);return(i.getTime()-r.getTime())/(1e3*60)<=2?{class:"online",text:"Online"}:{class:"offline",text:"Offline"}}getTimeAgo(i){let r=new Date,o=new Date(i),s=Math.floor((r.getTime()-o.getTime())/(1e3*60));if(s<1)return"Just now";if(s<60)return`${s} minute${s>1?"s":""} ago`;{let m=Math.floor(s/60);return`${m} hour${m>1?"s":""} ago`}}getDatabaseStatus(){return this.temperatureData||this.humidityData||this.soilMoistureData?{class:"online",text:"Connected",details:"Database is accessible"}:{class:"offline",text:"Disconnected",details:"Cannot connect to database"}}static \u0275fac=function(r){return new(r||a)(D(k),D(V),D(w))};static \u0275cmp=E({type:a,selectors:[["app-admin-dashboard"]],decls:143,vars:26,consts:[["tempLoading",""],["humLoading",""],["soilLoading",""],[1,"admin-dashboard-container"],[1,"admin-dashboard-header"],[1,"header-content"],[1,"user-info"],[1,"logout-btn",3,"click"],[1,"admin-dashboard-nav"],["routerLink","/admin/dashboard",1,"nav-item","active"],["routerLink","/admin/temperature",1,"nav-item"],["routerLink","/admin/humidity",1,"nav-item"],["routerLink","/admin/soil-moisture",1,"nav-item"],["routerLink","/admin/users",1,"nav-item"],["routerLink","/admin/data-visualization",1,"nav-item"],["routerLink","/admin/profile",1,"nav-item"],[1,"admin-dashboard-main"],[1,"readings-section"],[1,"readings-grid"],[1,"reading-card","temperature"],[1,"reading-icon"],[1,"reading-content"],["class","reading-value",4,"ngIf","ngIfElse"],["class","reading-time",4,"ngIf"],[1,"reading-card","humidity"],[1,"reading-card","soil-moisture"],[1,"actions-section"],[1,"actions-grid"],[1,"action-card",3,"click"],[1,"action-icon"],[1,"status-section"],[1,"status-grid"],[1,"status-card"],[1,"status-indicator"],[1,"status-content"],[4,"ngIf"],[1,"reading-value"],[1,"loading"],[1,"reading-time"]],template:function(r,o){if(r&1){let s=O();e(0,"div",3)(1,"header",4)(2,"div",5)(3,"h1"),n(4,"\u{1F331} AgriWatch Admin Dashboard"),t(),e(5,"div",6)(6,"span"),n(7),t(),e(8,"button",7),x("click",function(){return u(s),g(o.logout())}),n(9,"Sign Out"),t()()()(),e(10,"nav",8)(11,"a",9),n(12,"Dashboard"),t(),e(13,"a",10),n(14,"Temperature"),t(),e(15,"a",11),n(16,"Humidity"),t(),e(17,"a",12),n(18,"Soil Moisture"),t(),e(19,"a",13),n(20,"Users"),t(),e(21,"a",14),n(22,"Data Visualization"),t(),e(23,"a",15),n(24,"Profile"),t()(),e(25,"main",16)(26,"section",17)(27,"h2"),n(28,"Current Sensor Readings"),t(),e(29,"div",18)(30,"div",19)(31,"div",20),n(32,"\u{1F321}\uFE0F"),t(),e(33,"div",21)(34,"h3"),n(35,"Temperature"),t(),v(36,R,2,1,"div",22)(37,H,2,0,"ng-template",null,0,M)(39,U,3,4,"p",23),t()(),e(40,"div",24)(41,"div",20),n(42,"\u{1F4A7}"),t(),e(43,"div",21)(44,"h3"),n(45,"Humidity"),t(),v(46,F,2,1,"div",22)(47,B,2,0,"ng-template",null,1,M)(49,j,3,4,"p",23),t()(),e(50,"div",25)(51,"div",20),n(52,"\u{1F331}"),t(),e(53,"div",21)(54,"h3"),n(55,"Soil Moisture"),t(),v(56,$,2,1,"div",22)(57,N,2,0,"ng-template",null,2,M)(59,W,3,4,"p",23),t()()()(),e(60,"section",26)(61,"h2"),n(62,"Quick Actions"),t(),e(63,"div",27)(64,"div",28),x("click",function(){return u(s),g(o.navigateTo("/admin/temperature"))}),e(65,"div",29),n(66,"\u{1F4CA}"),t(),e(67,"h3"),n(68,"View Temperature Log"),t(),e(69,"p"),n(70,"Check temperature history and trends"),t()(),e(71,"div",28),x("click",function(){return u(s),g(o.navigateTo("/admin/humidity"))}),e(72,"div",29),n(73,"\u{1F4C8}"),t(),e(74,"h3"),n(75,"View Humidity Log"),t(),e(76,"p"),n(77,"Monitor humidity patterns over time"),t()(),e(78,"div",28),x("click",function(){return u(s),g(o.navigateTo("/admin/soil-moisture"))}),e(79,"div",29),n(80,"\u{1F4CB}"),t(),e(81,"h3"),n(82,"View Soil Moisture Log"),t(),e(83,"p"),n(84,"Track soil moisture levels"),t()(),e(85,"div",28),x("click",function(){return u(s),g(o.navigateTo("/admin/users"))}),e(86,"div",29),n(87,"\u{1F465}"),t(),e(88,"h3"),n(89,"Manage Users"),t(),e(90,"p"),n(91,"View, edit, and delete user accounts"),t()(),e(92,"div",28),x("click",function(){return u(s),g(o.navigateTo("/admin/data-visualization"))}),e(93,"div",29),n(94,"\u{1F4CA}"),t(),e(95,"h3"),n(96,"Data Visualization"),t(),e(97,"p"),n(98,"Live charts and analytics"),t()(),e(99,"div",28),x("click",function(){return u(s),g(o.navigateTo("/admin/profile"))}),e(100,"div",29),n(101,"\u{1F464}"),t(),e(102,"h3"),n(103,"Admin Profile"),t(),e(104,"p"),n(105,"Update your account information"),t()()()(),e(106,"section",30)(107,"h2"),n(108,"System Status"),t(),e(109,"div",31)(110,"div",32),h(111,"div",33),e(112,"div",34)(113,"h3"),n(114,"Temperature Sensor"),t(),e(115,"p"),n(116),t(),v(117,Y,2,1,"small",35),t()(),e(118,"div",32),h(119,"div",33),e(120,"div",34)(121,"h3"),n(122,"Humidity Sensor"),t(),e(123,"p"),n(124),t(),v(125,J,2,1,"small",35),t()(),e(126,"div",32),h(127,"div",33),e(128,"div",34)(129,"h3"),n(130,"Soil Moisture Sensor"),t(),e(131,"p"),n(132),t(),v(133,Q,2,1,"small",35),t()(),e(134,"div",32),h(135,"div",33),e(136,"div",34)(137,"h3"),n(138,"Database"),t(),e(139,"p"),n(140),t(),e(141,"small"),n(142),t()()()()()()()}if(r&2){let s=S(38),m=S(48),z=S(58);d(7),f("Welcome, ",o.currentUser==null?null:o.currentUser.name),d(29),l("ngIf",o.temperatureData)("ngIfElse",s),d(3),l("ngIf",o.temperatureData),d(7),l("ngIf",o.humidityData)("ngIfElse",m),d(3),l("ngIf",o.humidityData),d(7),l("ngIf",o.soilMoistureData)("ngIfElse",z),d(3),l("ngIf",o.soilMoistureData),d(52),_(o.getTemperatureStatus().class),d(5),p(o.getTemperatureStatus().text),d(),l("ngIf",o.temperatureData),d(2),_(o.getHumidityStatus().class),d(5),p(o.getHumidityStatus().text),d(),l("ngIf",o.humidityData),d(2),_(o.getSoilMoistureStatus().class),d(5),p(o.getSoilMoistureStatus().text),d(),l("ngIf",o.soilMoistureData),d(2),_(o.getDatabaseStatus().class),d(5),p(o.getDatabaseStatus().text),d(2),p(o.getDatabaseStatus().details)}},dependencies:[T,P,I,A,y],styles:[".admin-dashboard-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);background:#f8f9fa;padding-bottom:20px}.admin-dashboard-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#17a2b8,#20c997);color:#fff;padding:20px 0;box-shadow:0 2px 10px #0000001a}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.logout-btn[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3);padding:8px 16px;border-radius:8px;cursor:pointer;transition:background .3s ease}.logout-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.admin-dashboard-nav[_ngcontent-%COMP%]{background:#fff;padding:0 40px;border-bottom:1px solid #e1e8ed}.nav-item[_ngcontent-%COMP%]{display:inline-block;padding:15px 20px;color:#7f8c8d;text-decoration:none;border-bottom:3px solid transparent;transition:all .3s ease}.nav-item[_ngcontent-%COMP%]:hover, .nav-item.active[_ngcontent-%COMP%]{color:#17a2b8;border-bottom-color:#17a2b8}.admin-dashboard-main[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.readings-section[_ngcontent-%COMP%], .actions-section[_ngcontent-%COMP%], .status-section[_ngcontent-%COMP%]{margin-bottom:40px}.readings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .actions-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .status-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:20px;font-size:1.5rem}.readings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:30px}.reading-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 5px 15px #00000014;display:flex;align-items:center;gap:20px;transition:transform .3s ease}.reading-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.reading-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:60px;text-align:center}.reading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#2c3e50;font-size:1.1rem}.reading-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#17a2b8;margin-bottom:5px}.reading-time[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem;margin:0}.loading[_ngcontent-%COMP%]{color:#7f8c8d;font-style:italic}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.action-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:25px;box-shadow:0 5px 15px #00000014;text-align:center;cursor:pointer;transition:all .3s ease}.action-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000026}.action-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:15px}.action-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;margin:0 0 10px}.action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin:0;font-size:.9rem}.status-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.status-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:20px;box-shadow:0 5px 15px #00000014;display:flex;align-items:center;gap:15px}.status-indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.status-indicator.online[_ngcontent-%COMP%]{background:#27ae60}.status-indicator.offline[_ngcontent-%COMP%]{background:#e74c3c}.status-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;color:#2c3e50;font-size:1rem}.status-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#7f8c8d;font-size:.9rem}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.readings-grid[_ngcontent-%COMP%], .actions-grid[_ngcontent-%COMP%], .status-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.nav-item[_ngcontent-%COMP%]{padding:10px 15px;font-size:.9rem}}"]})};export{L as AdminDashboardComponent};
